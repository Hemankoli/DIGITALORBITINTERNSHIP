<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="UTF-8">
    <title>Native Speech Recognition</title>
    <link rel="stylesheet" href="style.css">
    </head>
    <body>

        <div class="words" contenteditable></div>

        <script>
            
            window.SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;  //SpeechRecognition API is used,

            const recognition = new SpeechRecognition();      //This object handles the speech recognition process.
            recognition.interimResults = true;             //as the person is speaking.
            recognition.lang = 'en-US';  

            let p = document.createElement('p');
            const words = document.querySelector('.words');
            words.appendChild(p);

            recognition.addEventListener('result', e => {
            const transcript = Array.from(e.results)     //Converts object into an array.
                .map(result => result[0])
                .map(result => result.transcript)
                .join('');    //Joins all the pieces of the recognized speech together into a single string.

                const poopScript = transcript.replace(/poop|poo|shit|dump/gi, 'ðŸ’©');
                p.textContent = poopScript;

                if (e.results[0].isFinal) {
                p = document.createElement('p');
                words.appendChild(p);
                }
            });

            recognition.addEventListener('end', recognition.start);

            recognition.start();

        </script>

    </body>
</html>